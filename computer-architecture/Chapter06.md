# 메모리와 캐시 메모리

## RAM의 특징과 종류
- - -
### RAM의 특징
- 휘발성 저장 장치로 전원을 끄면 저장된 명령어와 데이터가 모두 날아간다.
보조기억장치는 비휘발성 저장장치로, 전원을 꺼도 저장된 데이터가 날아가지 않습니다.

### RAM의 용량과 성능
- RAM의 용량이 작으면 보조기억장치에서 실행할 프로그램을 가져오는 일이 잦아 실행시간이 길어짐.

### RAM의 종류

1. DRAM(Dynamic RAM)  
   - 시간이 지나면 저장된 데이터가 점차 사라지는 RAM으로 주기적으로 데이터를 다시저장해야 함.
   - 소비전력 비교적 낮음
   - 가격이 저렴함
   - 집적도가 높음 -> 대용량 설계에 적합함
   - 일반적으로 사용되는 메모리
2. SRAM(Static RAM)
   - 시간이 지나도 저장된 데이터가 사라지지 않음.(비휘발성 메모리는 아님. 전원이 공급되지 않으면 저장된 내용이 날아감)
   - 소비전력 비교적 높음
   - 가격이 비교적 비쌈
   - 집적도가 낮음
   - 캐시 메모리에 적합
3. SDRAM(Syncronous DRAM)
   - 클럭신호와 동기화된, DRAM으로 클럭타이밍에 맞춰 cpu와 정보를 주고받을 수 있음.
4. DDR SDRAM(Double Data Rate SDRAM)
   - 최근 가장 흔히 사용되는 RAM
   - 전송속도가 일반 SDRAM에 비해 두배가량빠름
   - DDR3 SDRAM = DDR SDRAM에 비해 2배가랑 빠름 = SDRAM에 비해 8배 가량 빠름

## 메모리 주소 공간
- - -
### 물리 주소와 논리 주소
- 물리주소(physical address) : 실제로 저장된 하드웨어상의 주소를 의미
- 논리주소(logical address) : cpu와 실행중인 프로그램이 사용하는 주소로, 실행중인 프로그램에게 부여된 0번지 부터 시작되는 주소  
- 메모리 관리장치(MMU : Memory Management Unit) 
  - 논리 주소와 물리 주소간의 변환을 담당하는 하드웨어
  - cpu가 발생시킨 논리주소에 베이스레지스터 값을 더하는 방식으로 변환한다.
  - cpu와 주소버스 사이에 위치함

### 메모리 보호 기법
- 한계 레지스터(limit register)
  - 다른 프로그램의 영역을 침범할 수 있는 명령어가 발생하는 경우를 방지하기 위해 사용하는 레지스터
  - 논리주소의 최대 크기를 저장함.  
  - cpu는 메모리에 접근하기 전에 접근하고자 하는 논리주소가 `한계레지스터`보다 작은지를 항상 검사함 -> 한계레지스터보다 큰경우 인터럽트(트랩)을 발생시켜 실행을 중단함


## 캐시 메모리
- - -
cpu가 메모리에 접근하는 시간은 cpu의 연산 속도보다 느립니다. cpu가 연산을 빨리 한다해도 메모리에 접근하는 시간이 느리면 cpu의 빠른 연산속도는 무용지물이 됩니다. 이를 극복하기 위한 저장장치가 `캐시메모리`입니다.

### 저장 장치 계층 구조
저장장치들이 `cpu에 얼마나 가까운가`를 기준으로 계층적으로 나타낸 구조
- cpu와 가까운 저장장치는 빠르고, 멀리 있는 저장 장치는 느리다
- `속도`가 빠른 저장장치는 `용량`이 작고, `가격`이 비싸다.

### 캐시 메모리
cpu와 메모리 사이에 위치하고, 레지스터보다 용량이 크고 메모리보다 빠른 `SRAM`기반 저장장치

### 참조 지역성 원리
메모리가 보조기억장치의 일부를 복사하여 저장하는 것처럼 캐시메모리는 메모리의 일부를 복사하여 저장합니다.
- 캐시 히트(cache hit): 캐시메모리가 cpu가 사용할만한 대상을 예측하고 저장하는데, 이때 예측에 성공하는 경우를 나타냄.
- 캐시 미스(cache miss): 예측이 틀려 메모리에 필요한 데이터를 직접 가져와야 하는 경우.
- 캐시적중률(cache hit ratio)
  - 캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수)

캐시 메모리는 `참조 지역서의 원리`에 따라 메모리에서 데이터를 가져옵니다.
1. `시간 지역성` : cpu는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다. 
ex) 프로그래밍 언어를 사용시, 생성된 변수에 계속 접근하여 사용한다.(반복문으로 구구단 만들기)
2. `공간 지역성` : cpu는 접근한 메모리 공간 근처를 접근하려는 경향이 있다.
ex) cpu가 실행하려는 프로그램은 보통 관련 데이터들끼리 모여있다.