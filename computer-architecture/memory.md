## RAM의 특징과 종류

- RAM의 특징
    - RAM에는 실행할 프로그램의 명령어와 데이터가 저장된다.
    - 전원을 끄면 RAM에 저장된 명령어와 데이터가 모두 날아간다.
        
        휘발성 저장장치 ↔ 비휘발성 저장장치(보조기억장치)
        
        → 보조기억장치에는 보관할 대상을 저장하고 휘발성 저장장치에는 실행할 대상을 저장
        
        → CPU가 실행하고 싶은 프로그램이 보조기억장치에 있다면 이를 RAM으로 복사하여 저장한 뒤 실행
        
- RAM의 용량과 성능
    - RAM의 용량이 충분히 크다면 많은 프로그램을 동시에 실행하는 데 유리
    - RAM이 필요이상으로 커지면 속도가 비례하여 증가하는 것은 아님
- RAM의 종류
    1. DRAM
        - Dynamic RAM
        - 저장된데이터가 동적으로 사라지는 RAM
        - 시간이 지나면 저장된 데이터가 점차 소멸
        - 데이터의 소멸을 막기 위해선 일정 주기로 데이터를 재활성화 해야함
        - 소비전력이 낮음
        - 저렴함
        - 집적도가 높음 → 오밀조밀 설계 → 대용량 ㄱㄴ
        - 일반적으로 사용됨
    2. SRAM
        - Static RAM
        - 저장된 데이터가 변하지 않는 RAM
        - DRAM보다 일반적으로 속도가 더 빠름
        - but SRAM도 메모리! → 전원이 꺼지면 저장된 내용 소멸
        - 소비전력 큼
        - 비쌈
        - 집적도 낮음
        
        → 대용량으로 만들어질 필요는 없지만 속도가 빨라야하는 저장장치인 가령 **캐시 메모리**에서 사용됨
        
    
    1. (SDR)SDRAM
        - Synchronous Dynamic
        - 클럭신호와 동기화된 발전된 DRAM
        - 클럭 타이밍에 맞춰 CPU와 정보를 주고 받음
    2. DDR SDRAM
        - Double Data Rate SDRAM
            - 최근 가장 흔히 사용되는 RAM
            - 대역폭을 넓혀 속도를 빠르게 만든 SDRAM
                
                > **대역폭**
                > 
                > 
                > 데이터를 주고받는 길의 너비
                > 
            - SDR SDRAM보다 대역폭이 두배 넓음
                
                → 한 클럭 당 두배의 데이터를 주고받을 수 있음 속도도 두배가량 빠름
                
            - 속도(X2)
                
                (SDR) SDRAM < DDR SDRAM < DDR2 SDRAM < …
                

## 메모리의 주소공간

> **물리주소**
> 
> 
> 실제로 메모리 하드웨어가 사용하는 주소
> 
> **논리주소**
> 
> CPU와 실행중인 프로그램이 사용하는 주소, 프로그램마다 0번지부터 시작
> 
> 
- 메모리에 저장된 정보를 시시각각 변하며 같은 프로그램을 실행하더라도 실행할 때마다 적재되는 주소가 달라질 수 있다
    
    → CPU가 메모리에 있는 프로그램의 모든 주소를 다 알고있긴 어렵다
    
    → 논리주소 사용
    
- MMU
    
    
    CPU와 메모리가 상호작용 하려면 논리주소와 물리주소 간의 변환이 이루어져야하는데, 이때 메모리 관리 장치인 MMU(Memory Management Unit)라는 하드웨어에 의해 변환된다.
    
    - MMU는 CPU가 발생시킨 논리 주소에 베이스 레지스터 값(기준주소)를 더하여 논리 주소를 물리주소로 변환한다.
        
        베이스 레지스터에는 프로그램의 첫 물리주소가 저장되어있고 논리주소는 프로그램 시작점부터 떨어진 거리인 셈이다.
        
- 메모리 보호 기법
    
    CPU가 프로그램의 논리주소 영역을 벗어나는 명령을 할 경우, 다른 프로그램의 영역을 침범할 수 있다. 실행중인 프로그램이 다른 프로그램에 영향을 받지 않도록 보호해야하는데 이때 **한계 레지스터**가 사용된다.
    
    
    - 한계레지스터
        
        논리주소의 최대 크기가 저장되는 레지스터
        
    - CPU가 접근하려는 논리 주소는 한계 레지스터가 저장한 값보다 크면 안된다.
    - CPU가 한계 레지스터보다 높은 논리주소에 접근하려고 한다면 인터럽트(트랩 : 예외를 처리한 직후 다음 명령어 부터 실행)를 발생
    
    → 실행 중인 프로그램의 독립적인 실행 공간을 확보하고 하나의 프로그램이 다른 프로그램을 침범하지 못하게 보호할 수 있음
    

## 캐시 메모리

CPU는 프로그램을 실행하는 과정에서 메모리에 저장된 데이터를 빈번하게 사용한다. 하지만 CPU가 메모리에 접근하는 시간은 CPU의 연산속도보다 느리다. 이를 극복하기 위한 장치가 **캐시 메모리**이다.

- 저장장치 계층 구조
    
    - 빠른 저장장치와 용량이 큰 저장장치는 양립하기 어려움
        1. CPU와 가까운 저장장치는 빠르고 멀리있는 저장장치는 느리다.
        2. 속도가 빠른 저장장치는 저장용량이 작고 비싸다.
        
        CPU와 가장 가까운 레지스터는 RAM보다 용량이 작지만 접근 시간이 빠르고 비싸다. USB메모리보다 CPU에 더 가까운 RAM은 접근시간이 훨씬 더 빠르지만 같은 용량이라고 할지라도 더 비싸다.
        
- 캐시메모리
    
    CPU와 메모리 사이에 위치하고 레지스터보다 용량이 크고 메모리보다 빠른 SRAM 기반의 저장장치로 메모리에서 CPU가 사용할 일부 데이터를 미리 캐시 메모리로 가지고 와서 활용
    
    - 컴퓨터 내부에는 여러개의 캐시메모리가 존재
    - CPU에 가까운 순으로 순서대로 계층을 구성
        
        코어에 가까운 순으로 L1, L2, L3
        
    - 캐시 메모리 용량 L3 > L2 > L1
    - 캐시 메모리 속도 L1 > L2 > L3
    - 캐시 메모리 가격 L1 > L2 > L3
    - CPU는 L1 →  L2 → L3 순으로 데이터를 탐색
    
    > **분리형 캐시**
    > 
    > 
    > 명령어만을 저장하는 L1캐시인 L1I, 데이터만을 저장하는 L1캐시인 L1D로 분리
    > 
- 참조 지역성 원리
    
    캐시 메모리에는 CPU가 사용할 법한 대상을 예측하여 저장한다. 이 때 참조 지역성의 원리의 기반으로 메모리로부터 가져올 데이터를 결정한다.
    
    1. CPU는 최근에 접근했던 메모리 공간에 다시 접근하는 경향이 있다. (시간 지역성)
        
        ex) CPU는 변수가 저장된 메모리 공간을 언제든 다시 참조할 수 있다
        
    2. CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다. (공간 지역성)
        
        ex) CPU가 실행하려는 프로그램은 보통 관련 데이터들끼리 한데 모여있다
        
    - 캐시 히트 : 자주 사용될 것으로 예측한 데이터가 실제로 들어맞아 캐시 메모리 내 데이터가 CPU에서 활용된 경우
    - 캐시 미스 : 예측이 틀려 메모리에서 필요한 데이터를 직접 가져와야 하는 경우
    - 캐시 적중률 : 캐시 히트 수 / (캐시 히트 수 + 캐시 미스 수)
