# 교착 상태
## 교착상태 발생 조건
- - -
- 교착상태 : 일어나지 않을 사건을 기다리며 진행이 멈춰버리는 현상 
- 자원할당 그래프(resource-allocation graph)  
  자원할당 그래프는 어떤 프로세스가 어떤 자원을 사용하고, 기다리고 있는지 표현한 그래프 
  1. 프로세스는 원으로 자원의 종류는 사각형으로 표현한다.
  2. 사용할 수 있는 자원의 개수는 자원사각형 내에 점으로 표현한다.
  3. 프로세스가 어떤 자원을 할당받아 `사용`중이라면, `자원`에서 `프로세스`를 향해 화살표를 표시한다.
  4. 프로세스가 어떤 자원을 기다리고(`대기`) 있다면 `프로세스`에서 `자원`으로 화살표를 표시한다.

### 교착상태가 발생하는 4가지 조건
1. 상호배제
2. 점유와대기 : 자원을 보유한채 다른 자원을 기다림
3. 비선점
4. 원형대기: 프로세스들과 프로세스가 요청 및 할당 받은 자원이(자원할당 그래프가) 원의 형태를 이룸


## 교착상태 해결 방법
- - -
교착상태 발생 조건을 고려하여 자원을 분배하는 `예방`,
교착 상태가 발생하지 않을 정도로 자원을 조금씩 할당하는 `회피`,
자원을 제약없이 할당하다 교착상태가 검출되면 교착상태를 회복하는 `검출 후 회복`으로 교착상태를 해결할 수 있습니다.

### 교착상태 예방
- 상호배제 없애기 
  - 모든 자원을 공유하게 만든다(?) -> 불가능
- 점유와 대기 없애기
  - 운영체제가 자원을 모두 할당하거나, 아예 할당하지 않는 방식으로 배분함
  - 단점) 자원활용률이 낮아질 수 있음.-> 당장 자원이 필요해도 기다려야만하는 프로세스와 다수의 자원이 활용되지 않기 때문
  - 단점) 많은 자원을 활용하는 프로세스가 분리함. `기아현상`발생 가능성.
- 비선점 없애기
  - 프린터같은 자원의 경우, 다른 프로세스가 사용중인 자원을 빼앗아 사용하기 모호함 -> 범용성 떨어짐
- 원형대기 조건 없애기
  - 모든 자원을 순서대로 할당함.
    - 단점) 많은 자원에 순서를 부여하는 작업이 필요함
    - 단점) 특정 자원의 활용률이 떨어질 수 있음
  
### 교착 상태 회피
교착상태는 한정된 자원의 무분별한 할당으로 발생하는 문제
- 안정상태(safe state): 모든 프로세스가 정상적으로 자원을 할당받고 종료될수 있는 상태
- 불안정 상태(unsafe state): 교착상태가 발생할 수도 있는 상태
  - 안전 순서열이 없는 상태
- 안전순서열(safe sequence): 교착상태 없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서

### 교착 상태 검출 후 회복
교착상태가 발생한 이후에 조치하는 방식
- 선점을 통한 회복
  - 교착 상태가 해결될때 까지 한 프로세스씩 자원을 몰아주는 방식
- 프로세스 강제 종료를 통한 회복
  - 모든 프로세스를 종료한다 -> 프로세스들이 작업하던 내용을 잃을 수 있음
  - 교착상태가 없어질때 까지 하나씩 종료한다. -> 교착상태가 사라졌는지 확인하는 과정에서 `오버헤드`를 야기함.

### 타조알고리즘
교착상태를 무시하는 방식